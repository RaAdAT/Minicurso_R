---
title: "Parte 1 - O básico do R"
author: "Rafael Tavares"
date: "June 29, 2017"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# O básico do R

Nesta primeira parte do minicurso serão apresentadas 

## Referências para estudo

Antes de iniciar o conteúdo do curso propriamente dito, vale comentar sobre algumas boas referências disponíveis na internet para estudo posterior:

- Livros [R for Data Science](http://r4ds.had.co.nz/) e [Advanced R](http://adv-r.had.co.nz/) : Bons livros para estudo do R. Sugiro começar pelo primeiro.
- [_Cheatsheets_ do RStudio](https://www.rstudio.com/resources/cheatsheets/): Essa página contém resumos com comandos para diversos pacotes/operações do R. É uma boa fonte de consulta rápida. 

## O básico do básico

Uma grande vantagem de se utilizar programas como o R, Matlab e Stata para analisar dados é a possibilidade de documentar o "passo-a-passo" de uma sequência de operações realizadas. No R, o arquivo que documenta trabalhos é o _script_, que tem extensão ".R". 

A ideia aqui é que acompanhe o conteúdo apresentado no minicurso colocando as operações em seu próprio script. Tente mantê-lo organizado! 

Para fazer comentários no _script_ (ou garantir que o R não "lerá" como uma operação a ser feita), basta utilizar "#" no início da linha:

```{r}
# Esta linha contém um comentário
# A próxima linha não contém um comentário 
5
```

## Estruturas de dados

R’s base data structures can be organised by their dimensionality (1d,
2d, or nd) and whether they’re homogeneous (all contents must be of
the same type) or heterogeneous (the contents can be of different types).
This gives rise to the five data types most often used in data analysis:

As bases de dados utilizadas no R podem ser classificadas ou organizadas de acordo com sua (i) dimensionalidade (1d, 2d ou nd) e  (ii) se são homogêneas (todos os elementos são de mesmo tipo) ou heterogêneas (os elementos são de diferentes tipos). A partir desses parâmetros, pode-se classificar cinco tipos principais de bases de dados:


|           | Homogêneo | Heterogêneo    | 
| :-------- |:--------: | :------------: |
| **1d**    | Vetor     |   Lista        | 
| **2d**    | Matriz    |  Base de dados | 
| **nd**    | _Array_   |                | 

Neste minicurso, serão discutidos com mais calma os objetos de tipo "Vetor" e "Base de dados". Tal escolha parte do princípio de que os inscritos trabalharão prioritariamente com bases de dados. Além disso, como será visto, bases de dados são combinações de vários vetores.

## Operações matemáticas e vetores atômicos

O R serve como calculadora e realizar operações matemáticas é bem simples.

Soma:

```{r}
15 + 5
```

Subtração:

```{r}
15 - 5
```

Multiplicação:

```{r}
15 * 5
```

Divisão:

```{r}
15 / 5
```

Potência:

```{r}
2 ^ 2
```

Divisão inteira (sem resto):

```{r}
16 %/% 5
```

Resto da divisão:

```{r}
16 %% 5
```
Para criar uma sequência simples de números no R, basta utilizar o operador ":". Ele cria um vetor em sua forma mais simples:

```{r}
1:6
```
Pode até ser divertido utilizar o R como uma calculadora, mas sua principal virtude está em criar todo o tipo de objeto. Dos mais simples aos mais complexos. Talvez sua versão mais simples seja o que conhecemos como "variável" do ensino básico. Isto é:

```{r}
x <- 15
```
Note que pode-se utilizar tanto o operador "<-" como "=":

```{r}
x = 15
```
Note ainda que, diferentemente dos casos anteriores, não apareceu "resultado" da operação logo após a execução do comando. Para imprimir o valor de uma variável no console basta digitar seu nome:

```{r}
x
```
Em alguns casos, é necessário utilizar a função _print_, que "imprime" o resultado no console:

```{r}
print(x)
```
Criando uma nova variável, é possível realizar operações como as que realizamos anteriormente com números:

```{r}
y <- 5

x + y
x - y
x / y
x * y
```
Novamente, é possível criar objetos que armazenem o resultado dessas operações. Veja os exemplos:

```{r}
z1 <- 42 / 3
z2 <- x + y
z3 <- ((x / 5 ) * 9) + 32
```

É possível listar os objetos até então criados com a função _ls_:

```{r}
ls()
```

## Classes de vetores

Há três *classes* principais de vetores:

```{r}
numero <- 10
texto <- "Texto"
logico <- TRUE
```
É possível examinar a classe de cada um dos vetores atômicos criados com a função _class_:

```{r}
class(numero)
class(texto)
class(logico)
```
Como os nomes sugerem, vetores de classe _numeric_ contêm números, vetores de classe _character_ contêm textos e vetores de classe _logical_ contêm valores lógicos (TRUE ou FALSE).

## Vetores de maiores dimensões

Para criar vetores de dimensão maior que 1, é preciso utilizar a função _c_, abreviado de _combine_:

```{r}
vetor_numerico <- c(42, 7, 999, 3.14)
vetor_texto <- c("sim", "a", '10', "15", "TRUE")
vetor_logico <- c(TRUE, FALSE, F, F, T)
```
Operações matemáticas com vetores de dimensão maior que 1 seguem a mesma lógica de vetores atômicos. As operações são feitas para cada posição dos vetores (ao invés de operações matriciais):

```{r}
x <- c(1, 2)
y <- c(3, 4)
x * y
```
## Subconjunto de um vetor

Uma parte muito importante da linguagem R é a capacidade de manipular com facilidade subconjuntos das informações disponíveis. Isto é, caso se queira obter apenas alguns elementos de um vetor, é preciso utilizar colchetes "[]" indicando as posições dos elementos. No caso de um vetor, há apenas uma dimensão a se percorrer. Alguns exemplos:

```{r}
x <- c(10, 20, 30, 40)
x[2]
x[3:4]
x[c(2, 4)]
```
É possível também definir um subconjunto a partir de um novo objeto. Por exemplo, criando um vetor lógico "uma_parte_de_x":

```{r}
uma_parte_de_x <- x > 15
class(uma_parte_de_x)
print(uma_parte_de_x)
x[uma_parte_de_x]
```

## Estatísticas descritivas de um vetor

Fazer estatísticas descritivas de um vetor (ou de uma variável numa base de dados) é um processo bem simples. As funções são bem intuitivas (em inglês). Exemplo: meu consumo de litros de café por mês em 2017. Aproveitando, colocarei os nomes dos meses com a função _names_:

```{r}
litros_cafe <- c(4.3, 3.1, 5.3, 5.5, 6.9, 8.3)
names(litros_cafe) <- c("Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho")
```
A seguir: soma, media, desvio padrão, variância, mediana, máximo, mínimo e quantil, na respectiva ordem.

```{r}
sum(litros_cafe)
mean(litros_cafe)
sd(litros_cafe)
var(litros_cafe)
median(litros_cafe)
max(litros_cafe)
min(litros_cafe)
quantile(litros_cafe, probs = c(0, 0.2, 0.4, 0.6, .8))
```
Note que a função _quantile_ requer um segundo argumento que indica os quantis a serem reportados. Caso não seja indicado o segundo argumento "_probs_", serão reportados os seguintes quantis: 0%, 25%, 50%, 75% e 100%.
